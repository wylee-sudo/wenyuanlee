<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Color Idioms Quiz｜包含色名但不指涉顏色的英文片語</title>
  <style>
    :root{
      --bg:#f7f7fb;--card:#ffffff;--text:#222;--muted:#6b7280;--primary:#3b82f6;--ok:#16a34a;--bad:#dc2626;--ring:rgba(59,130,246,.3)
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,"Noto Sans TC","PingFang TC","Microsoft JhengHei",sans-serif;background:var(--bg);color:var(--text);}
    .wrap{min-height:100%;display:flex;flex-direction:column}
    header{padding:16px 20px;background:linear-gradient(180deg,#fafafe,#f2f4ff);border-bottom:1px solid #e5e7eb;display:flex;align-items:center;justify-content:space-between;}
    header .title{font-weight:700;font-size:clamp(18px,2.4vw,22px)}
    header .sub{color:var(--muted);font-size:clamp(12px,1.6vw,14px)}
    .back-btn{
      margin-left:auto;
      background: #e0e7ff;
      color: #3730a3;
      border: none;
      border-radius: 8px;
      padding: 8px 16px;
      font-size: 15px;
      font-weight: 600;
      cursor: pointer;
      text-decoration: none;
      transition: background .15s;
    }
    .back-btn:hover { background: #c7d2fe; }

    main{flex:1;display:flex;justify-content:center;align-items:flex-start;padding:24px}
    .card{width:min(760px,100%);background:var(--card);border-radius:18px;box-shadow:0 10px 30px rgba(0,0,0,.06);padding:20px}

    .toprow{display:flex;gap:8px;align-items:center;justify-content:space-between;margin-bottom:10px}
    .progress{font-size:14px;color:var(--muted)}

    .question{margin:8px 0 16px}
    .qen{font-size:clamp(20px,3.4vw,28px);font-weight:800;letter-spacing:.3px}
    .hint{color:var(--muted);font-size:14px;margin-top:6px}

    form{display:grid;gap:10px;margin:14px 0}
    .opt{display:flex;align-items:center;gap:10px;border:1px solid #e5e7eb;border-radius:14px;padding:12px 14px;background:#fff;cursor:pointer;transition:box-shadow .15s,border-color .15s,transform .0[...]
    .opt:hover{box-shadow:0 0 0 4px var(--ring)}
    .opt input{width:18px;height:18px}

    .btnrow{display:flex;gap:10px;flex-wrap:wrap;margin-top:8px}
    button{appearance:none;border:none;border-radius:12px;padding:12px 16px;font-weight:700;cursor:pointer}
    .primary{background:var(--primary);color:#fff}
    .ghost{background:#eef2ff;color:#374151}
    .secondary{background:#111827; color:#fff}
    button[disabled]{opacity:.5;cursor:not-allowed}

    .feedback{margin-top:12px;font-size:16px;font-weight:700}
    .feedback.ok{color:var(--ok)}
    .feedback.bad{color:var(--bad)}

    .result{padding:18px;border:1px dashed #e5e7eb;border-radius:14px;background:#fafafa}
    .bigscore{font-size:clamp(28px,5vw,42px);font-weight:900;margin-bottom:8px}
    .sumlist{margin-top:10px;line-height:1.7}

    footer{padding:22px 20px;color:var(--muted);text-align:center;font-size:13px}
    a{color:var(--primary);text-decoration:none}
  </style>
  <!-- Google tag (gtag.js) GA4，請將 G-XXXXXXXXXX 換成您的GA追蹤ID -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-N8QWS5JKZD');
  </script>
</head>
<body>
<div class="wrap">
  <header>
    <div>
      <div class="title">Color Idioms Quiz｜包含色名但不是在描述實際顏色</div>
      <div class="sub">色彩都不色彩了 · 歡迎挑戰這些英文片語</div>
    </div>
    
  </header>
  <main>
    <div class="card" id="app" role="region" aria-live="polite">
      <div class="toprow">
        <div class="progress" id="progress">第 1 / N 題</div>
        <div class="score progress" id="score" style="display:none"></div>
      </div>

      <section class="question">
        <div class="qen" id="qPhrase">Loading…</div>
        <div class="hint">請選出最貼切的中文意思。</div>
      </section>

      <form id="options" aria-label="選項"></form>

      <div class="btnrow">
        <button class="primary" id="submitBtn" disabled>送出答案</button>
        <button class="secondary" id="restartBtn" title="重新開始測驗" style="display:none">重新開始</button>
      </div>

      <div class="feedback" id="feedback"></div>

      <div class="result" id="final" style="display:none"></div>
    </div>
  </main>
  <footer>
    Developed by <strong>Color &amp; Design Research Lab</strong>
  </footer>
</div>

<script>
// ===== 題庫：英文片語（含色名） → 中文慣用意義 =====
const BANK = [
  {p:"out of the blue", m:"出乎意料"},
  {p:"once in a blue moon", m:"千載難逢"},
  {p:"have the blues", m:"情緒低落"},
  {p:"blue blood", m:"貴族血統"},
  {p:"blue-collar worker", m:"藍領階層（工人階級）"},
  {p:"true blue", m:"忠誠的、真誠的"},
  {p:"blue movie / blue joke", m:"色情影片／不雅笑話"},
  {p:"blue ribbon", m:"最高榮譽、第一名"},
  {p:"between the devil and the deep blue sea", m:"進退兩難"},

  {p:"red tape", m:"繁文縟節（官僚）"},
  {p:"see red", m:"大發雷霆"},
  {p:"in the red", m:"虧損中"},
  {p:"catch someone red-handed", m:"當場抓到（人贓俱獲）"},
  {p:"red herring", m:"假線索、轉移注意"},
  {p:"red-letter day", m:"值得紀念的日子"},
  {p:"paint the town red", m:"狂歡作樂"},
  {p:"red carpet treatment", m:"隆重接待"},
  {p:"not worth a red cent", m:"一文不值"},

  {p:"yellow-bellied", m:"膽小的、懦弱的"},
  {p:"yellow journalism", m:"聳動報導、八卦新聞"},
  {p:"yellow card", m:"黃牌警告（體育）"},

  {p:"green with envy", m:"妒火中燒"},
  {p:"green thumb / green fingers", m:"園藝天份"},
  {p:"the grass is greener on the other side", m:"別人的看起來更好"},
  {p:"greenhorn", m:"新手、生手"},
  {p:"give the green light", m:"准許、放行"},
  {p:"green room", m:"（演出者）等候室"},
  {p:"greenback", m:"美鈔"},

  {p:"black sheep", m:"害群之馬（丟臉人物）"},
  {p:"blackmail", m:"勒索"},
  {p:"black market", m:"黑市"},
  {p:"black out", m:"昏倒／停電／封鎖訊息"},
  {p:"blacklist", m:"黑名單"},
  {p:"black comedy", m:"黑色幽默"},
  {p:"black tie", m:"正式晚宴服（禮服）"},
  {p:"black magic", m:"邪術、巫術"},
  {p:"black and blue", m:"遍體鱗傷（瘀青）"},

  {p:"white lie", m:"善意的謊言"},
  {p:"white elephant", m:"昂貴卻無用的東西"},
  {p:"white-collar worker", m:"白領階層"},
  {p:"raise a white flag", m:"投降"},
  {p:"white knight", m:"白馬騎士（救星／善意收購者）"},
  {p:"whitewash", m:"粉飾、掩蓋錯誤"},
  {p:"white paper", m:"白皮書（政策文件）"},
  {p:"white noise", m:"白噪音"},
  {p:"white night", m:"不眠之夜／白夜"},

  {p:"born to the purple", m:"出身高貴"},
  {p:"purple prose", m:"辭藻華麗（帶貶義）的文風"},
  {p:"purple patch", m:"順遂的時期、走運期"},

  {p:"brown-bag lunch", m:"自備簡餐／便當"},
  {p:"brown-nose", m:"拍馬屁"},
  {p:"browned off", m:"厭煩、惱火（英式）"},

  {p:"grey area", m:"灰色地帶、模糊地帶"},
  {p:"grey matter", m:"腦子、智慧"},
  {p:"grey market", m:"灰色市場"},
  {p:"grey eminence", m:"幕後權力者"},

  {p:"tickled pink", m:"欣喜若狂"},
  {p:"in the pink (of health)", m:"身體狀況極佳"},
  {p:"pink slip", m:"解雇通知"},
  {p:"pink elephant", m:"醉酒幻覺"},

  {p:"golden opportunity", m:"黃金機會、絕佳時機"},
  {p:"golden age", m:"黃金時代"},
  {p:"golden handshake", m:"優退金、遣散費"},
  {p:"golden boy / golden girl", m:"備受矚目的成功者"},
  {p:"silver lining", m:"烏雲背後的一線希望"},
  {p:"born with a silver spoon in one's mouth", m:"含著金湯匙出生"},
  {p:"silver bullet", m:"特效解方、靈丹妙藥"},
  {p:"silver screen", m:"電影業、銀幕"},

  {p:"in black and white", m:"白紙黑字（書面證明）"},
  {p:"show one's true colors", m:"露出真面目"}
];

// ===== 常數 =====
const TOTAL_QUIZ = 5;  // 本次測驗固定 5 題

// ===== 狀態 =====
let order = [];           // 題目順序（抽 5 題，無重覆）
let idx = 0;              // 目前題號索引
let score = 0;            // 分數
let answered = false;     // 當前題是否已作答
let answeredLog = [];     // 本次抽題的作答紀錄

// ===== DOM 參照 =====
const qPhrase = document.getElementById('qPhrase');
const progressEl = document.getElementById('progress');
const scoreEl = document.getElementById('score');
const optionsForm = document.getElementById('options');
const submitBtn = document.getElementById('submitBtn');
const restartBtn = document.getElementById('restartBtn');
const feedbackEl = document.getElementById('feedback');
const finalEl = document.getElementById('final');

function shuffle(arr){
  for(let i=arr.length-1;i>0;i--){
    const j=Math.floor(Math.random()*(i+1));
    [arr[i],arr[j]]=[arr[j],arr[i]];
  }
  return arr;
}

function init(){
  // 從 70 題（BANK.length）隨機抽出 5 題的索引（不重覆）
  order = shuffle([...Array(BANK.length).keys()]).slice(0, TOTAL_QUIZ);
  idx = 0; score = 0; answered = false;
  // 隱藏分數與重新開始，直到作答完 5 題
  scoreEl.style.display = 'none';
  scoreEl.textContent = '';
  finalEl.style.display = 'none';
  submitBtn.disabled = true;
  restartBtn.style.display = 'none';
  feedbackEl.textContent = '';
  answeredLog = [];
  renderQuestion();
}

function renderQuestion(){
  const qIndex = order[idx];
  const q = BANK[qIndex];
  qPhrase.textContent = q.p;
  progressEl.textContent = `第 ${idx+1} / ${order.length} 題`;
  optionsForm.innerHTML = '';
  // 作答期間不顯示對錯
  feedbackEl.textContent = '';
  answered = false;

  // 產生選項：正確 + 三個隨機錯誤（不重複）
  const wrongPool = BANK.filter((_,i)=>i!==qIndex).map(x=>x.m);
  shuffle(wrongPool);
  const options = shuffle([q.m, ...wrongPool.slice(0,3)]);

  options.forEach((mText, i)=>{
    const id = `opt-${i}`;
    const label = document.createElement('label');
    label.className = 'opt';
    label.setAttribute('for', id);

    const input = document.createElement('input');
    input.type = 'radio';
    input.name = 'opt';
    input.id = id;
    input.value = mText;

    input.addEventListener('change',()=>{
      submitBtn.disabled = false;
      // 不顯示對錯
      feedbackEl.textContent = '';
    });

    const span = document.createElement('span');
    span.textContent = mText;

    label.appendChild(input);
    label.appendChild(span);
    optionsForm.appendChild(label);
  });
}

submitBtn.addEventListener('click', (e)=>{
  e.preventDefault();
  if(answered) return;
  const chosen = optionsForm.querySelector('input[name="opt"]:checked');
  if(!chosen){
    feedbackEl.textContent = '請先選擇一個選項。';
    return;
  }
  const q = BANK[order[idx]];
  const correct = chosen.value === q.m;

  // 記分，但不顯示對錯
  if(correct){ score++; }

  // 紀錄題目與正解（以及你的作答）
  answeredLog.push({
    phrase: q.p,
    correctMeaning: q.m,
    chosen: chosen.value,
    isCorrect: correct
  });

  answered = true;
  submitBtn.disabled = true;

  // 鎖定選項
  optionsForm.querySelectorAll('input[type="radio"]').forEach(r=>r.disabled = true);

  // 自動切換到下一題或顯示結果
  setTimeout(()=>{
    idx++;
    if(idx >= order.length){
      // 完成 5 題
      finalEl.style.display = 'block';
      // 大字體分數 + 題目與正解清單
      const summaryList = order.map((qIdx,i)=>{
        const q = BANK[qIdx];
        return `<li><code>${q.p}</code> — ${q.m}</li>`;
      }).join('');
      finalEl.innerHTML = `
        <div class="bigscore">分數：${score} / ${order.length}</div>
        <div>本次題目與正解：</div>
        <ol class="sumlist">
          ${summaryList}
        </ol>
        <div style="margin-top:20px; text-align:center;">
          <a class="back-btn" href="https://wylee-sudo.github.io/wenyuanlee/" target="_blank" rel="noopener">返回 Color &amp; Design Research Lab</a>
        </div>
      `;
      qPhrase.textContent = '本次 5 題已作答完畢。';
      optionsForm.innerHTML = '';
      progressEl.textContent = `第 ${order.length} / ${order.length} 題`;
      feedbackEl.textContent = '';
      submitBtn.disabled = true;
      // 顯示重新開始按鈕
      restartBtn.style.display = 'inline-block';
      // 顯示小分數欄（如需）
      scoreEl.style.display = 'block';
      scoreEl.textContent = `分數：${score} / ${order.length}`;
    } else {
      renderQuestion();
      submitBtn.disabled = true;
    }
  }, 400); // 0.4秒後自動切換，讓使用者感覺到有按下
});

restartBtn.addEventListener('click', (e)=>{
  e.preventDefault();
  init();
});

// 鍵盤 Enter 也能送出答案
window.addEventListener('keydown', (e)=>{
  if(e.key==='Enter' && !submitBtn.disabled){ submitBtn.click(); }
});

init();
</script>
</body>
</html>

