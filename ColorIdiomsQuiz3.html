<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Color Idioms Quiz｜色彩都不色彩了 · 歡迎挑戰這些包含色名但不是在描述實際顏色的英文片語</title>
  <style>
    :root{
      --bg:#f7f7fb;--card:#ffffff;--text:#222;--muted:#6b7280;--primary:#3b82f6;--ring:rgba(59,130,246,.3)
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,"Noto Sans TC","PingFang TC","Microsoft JhengHei",sans-serif;background:var(--bg);color:var(--text);}
    .wrap{min-height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:20px}
    .card{background:var(--card);padding:24px;border-radius:18px;box-shadow:0 6px 24px rgba(0,0,0,.08);max-width:720px;width:100%}
    h1{font-size:1.5rem;margin-bottom:8px;text-align:center}
    .progress{text-align:center;color:var(--muted);margin-bottom:16px}
    .question{font-size:1.4rem;font-weight:700;text-align:center;margin-bottom:16px}
    form{display:grid;gap:10px}
    label{border:1px solid #e5e7eb;padding:12px;border-radius:12px;background:#fff;cursor:pointer;transition:box-shadow .15s,border-color .15s}
    label:hover{box-shadow:0 0 0 4px var(--ring)}
    input{margin-right:8px}
    button{margin-top:20px;width:100%;padding:12px;border:none;border-radius:12px;background:var(--primary);color:#fff;font-weight:700;cursor:pointer}
    .result{text-align:center;margin-top:20px}
    .bigscore{font-size:clamp(56px,8vw,72px);font-weight:900;margin-bottom:12px}
    .eval{font-size:clamp(20px,4.5vw,28px);font-weight:800;margin:4px 0 14px;color:#111827;text-align:center}
    ol{line-height:1.6;text-align:left}
    .sumlist{line-height:1.6;text-align:left;margin-top:10px}
  </style>

  <!-- Google tag (gtag.js) GA4，請將 G-XXXXXXXXXX 換成您的GA追蹤ID -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-N8QWS5JKZD');
  </script>


</head>
<body>
  <div class="wrap">
    <div class="card">
      <h1>Color Idioms Quiz</h1>
      <div class="progress" id="progress"></div>
      <div class="question" id="qPhrase">Loading...</div>
      <form id="options"></form>
      <button id="submitBtn" disabled>送出答案</button>
      <div class="result" id="final" style="display:none"></div>
    </div>
  </div>
<script>
// 題庫（英文片語含色名 → 中文慣用意義）
const BANK = [
  {p:"out of the blue", m:"出乎意料"},
  {p:"once in a blue moon", m:"千載難逢"},
  {p:"have the blues", m:"情緒低落"},
  {p:"blue blood", m:"貴族血統"},
  {p:"blue-collar worker", m:"藍領階層（工人階級）"},
  {p:"true blue", m:"忠誠的、真誠的"},
  {p:"blue movie / blue joke", m:"色情影片／不雅笑話"},
  {p:"blue ribbon", m:"最高榮譽、第一名"},
  {p:"between the devil and the deep blue sea", m:"進退兩難"},

  {p:"red tape", m:"繁文縟節"},
  {p:"see red", m:"大發雷霆"},
  {p:"in the red", m:"虧損中"},
  {p:"catch someone red-handed", m:"人贓俱獲"},
  {p:"red herring", m:"假線索、轉移注意"},
  {p:"red-letter day", m:"值得紀念的日子"},
  {p:"paint the town red", m:"狂歡作樂"},
  {p:"red carpet treatment", m:"隆重接待"},
  {p:"not worth a red cent", m:"一文不值"},

  {p:"yellow-bellied", m:"膽小的、懦弱的"},
  {p:"yellow journalism", m:"聳動報導、八卦新聞"},
  {p:"yellow card", m:"黃牌警告"},
  {p:"green house", m:"溫室"},

  {p:"green with envy", m:"妒火中燒"},
  {p:"green thumb / green fingers", m:"園藝天份"},
  {p:"the grass is greener on the other side", m:"別人的看起來更好"},
  {p:"greenhorn", m:"新手、生手"},
  {p:"give the green light", m:"准許、放行"},
  {p:"green room", m:"（演出者）等候室"},
  {p:"greenback", m:"美鈔"},

  {p:"black sheep", m:"害群之馬"},
  {p:"blackmail", m:"勒索"},
  {p:"black market", m:"黑市"},
  {p:"black out", m:"昏倒／停電／封鎖訊息"},
  {p:"blacklist", m:"黑名單"},
  {p:"black comedy", m:"黑色幽默"},
  {p:"black tie", m:"正式晚宴服（禮服）"},
  {p:"black magic", m:"邪術、巫術"},
  {p:"black and blue", m:"遍體鱗傷（瘀青）"},

  {p:"white lie", m:"善意的謊言"},
  {p:"white elephant", m:"昂貴卻無用的東西"},
  {p:"white-collar worker", m:"白領階層"},
  {p:"raise a white flag", m:"投降"},
  {p:"white knight", m:"白馬騎士（救星／善意收購者）"},
  {p:"whitewash", m:"粉飾、掩蓋錯誤"},
  {p:"white paper", m:"白皮書（政策文件）"},
  {p:"white noise", m:"白噪音"},
  {p:"white night", m:"不眠之夜／夜晚仍亮如白晝"},

  {p:"born to the purple", m:"出身高貴"},
  {p:"purple prose", m:"辭藻華麗（帶貶義）的文風"},
  {p:"purple patch", m:"順遂的時期、走運期"},

  {p:"brown-bag lunch", m:"自備簡餐／便當"},
  {p:"brown-nose", m:"拍馬屁"},
  {p:"browned off", m:"厭煩、惱火（英式）"},

  {p:"grey area", m:"模糊地帶"},
  {p:"grey matter", m:"腦子、智慧"},
  {p:"grey market", m:"灰色市場"},
  {p:"grey eminence", m:"幕後權力者"},

  {p:"tickled pink", m:"欣喜若狂"},
  {p:"in the pink (of health)", m:"身體狀況極佳"},
  {p:"pink slip", m:"解雇通知"},
  {p:"pink elephant", m:"醉酒幻覺"},

  {p:"golden opportunity", m:"黃金機會、絕佳時機"},
  {p:"golden age", m:"黃金時代"},
  {p:"golden handshake", m:"優退金、遣散費"},
  {p:"golden boy / golden girl", m:"備受矚目的成功者"},
  {p:"silver lining", m:"烏雲背後的一線希望"},
  {p:"born with a silver spoon in one's mouth", m:"含著金湯匙出生"},
  {p:"silver bullet", m:"特效解方、靈丹妙藥"},
  {p:"silver screen", m:"電影業、銀幕"},

  {p:"in black and white", m:"白紙黑字（書面證明）"},
  {p:"show one's true colors", m:"露出真面目"}
];

// 常數：本次測驗固定 5 題
const TOTAL_QUIZ = 5;

// 狀態
let order = [];   // 題目索引（抽 5 題，無重覆）
let idx = 0;      // 目前題目編號
let score = 0;    // 分數

// DOM
const qPhrase   = document.getElementById('qPhrase');
const progressEl= document.getElementById('progress');
const optionsForm=document.getElementById('options');
const submitBtn = document.getElementById('submitBtn');
const finalEl   = document.getElementById('final');

function shuffle(a){
  for(let i=a.length-1;i>0;i--){
    const j=Math.floor(Math.random()*(i+1));
    [a[i],a[j]]=[a[j],a[i]];
  }
  return a;
}

function init(){
  // 從題庫隨機抽出 5 題（不重覆）
  order = shuffle([...Array(BANK.length).keys()]).slice(0, TOTAL_QUIZ);
  idx = 0; score = 0;
  finalEl.style.display = 'none';
  submitBtn.style.display = 'inline-block';
  renderQuestion();
}

function renderQuestion(){
  const qIndex = order[idx];
  const q = BANK[qIndex];
  qPhrase.textContent = q.p;
  progressEl.textContent = `第 ${idx+1} / ${order.length} 題`;
  optionsForm.innerHTML = '';

  // 產生選項：正確 + 三個隨機錯誤（不重複）
  const wrongPool = BANK.filter((_,i)=>i!==qIndex).map(x=>x.m);
  shuffle(wrongPool);
  const opts = shuffle([q.m, ...wrongPool.slice(0,3)]);

  opts.forEach((m,i)=>{
    const id = `opt-${i}`;
    const label = document.createElement('label');
    const input = document.createElement('input');
    input.type = 'radio';
    input.name = 'opt';
    input.id = id;
    input.value = m;
    input.addEventListener('change',()=> submitBtn.disabled = false);
    label.appendChild(input);
    label.append(m);
    optionsForm.append(label);
  });

  submitBtn.disabled = true; // 未選前不可送出
}

submitBtn.addEventListener('click', e => {
  e.preventDefault();
  const chosen = optionsForm.querySelector('input[name="opt"]:checked');
  if(!chosen) return; // 無選擇則不處理

  const q = BANK[order[idx]];
  if(chosen.value === q.m) score++;

  idx++;
  if(idx >= order.length){
    // 完成：產生清單與評語
    const list = order.map(i => `<li><code>${BANK[i].p}</code> — ${BANK[i].m}</li>`).join('');
    const evalText = (score===5) ? '太厲害了' : (score===4) ? '啊~~差一題' : (score===3||score===2) ? '要加油了啦' : '你真的不懂色名';

    finalEl.innerHTML = `
      <div class="bigscore">分數：${score} / ${order.length}</div>
      <div class="eval">${evalText}</div>
      <div>本次題目與正解：</div>
      <ol class="sumlist">${list}</ol>
      <div style="margin-top:20px; text-align:center;">
        <a class="back-btn" href="https://wylee-sudo.github.io/wenyuanlee/" target="_blank" rel="noopener">返回 Color &amp; Design Research Lab</a>
      </div>
    `;

    // 顯示結果、收起送出按鈕
    finalEl.style.display = 'block';
    qPhrase.textContent = '完成！';
    optionsForm.innerHTML = '';
    progressEl.textContent = `第 ${order.length} / ${order.length} 題`;
    submitBtn.style.display = 'none';

    // —— 簡易自測（console）——
    console.assert(order.length === TOTAL_QUIZ, '應抽出 5 題');
    console.assert(typeof list === 'string' && list.includes('<li>'), '題目清單應為 HTML 字串');
  } else {
    // 立即進入下一題
    renderQuestion();
  }
});

// 啟動
init();
</script>
</body>
</html>
